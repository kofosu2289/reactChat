<html>

<head>
	<style>
	</style>
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<title>ReactChat</title>
	<script src="vendor/jquery/jquery.min.js"></script>
	<!-- Font Awesome CSS-->
	<link rel="stylesheet" href="vendor/font-awesome/css/font-awesome.min.css">
	<!-- Custom icon font-->
	<link rel="stylesheet" href="css/fontastic.css">
	<!-- Google fonts - Open Sans-->
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700">
	<!-- Fancybox-->
	<link rel="stylesheet" href="vendor/@fancyapps/fancybox/jquery.fancybox.min.css">
	<!-- theme stylesheet-->
	<link rel="stylesheet" href="css/style.default.css" id="theme-stylesheet">
	<!-- Custom stylesheet - for your changes-->
	<link rel="stylesheet" href="css/custom.css">
	<link rel="stylesheet" href="css/chat.css">
	<!-- Bootstrap core CSS -->
	<link href="md/css/bootstrap.min.css" rel="stylesheet">
	<!-- Material Design Bootstrap -->
	<link href="md/css/mdb.min.css" rel="stylesheet">
	<!-- Favicon-->


	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,400i,600,700|Raleway:300,400,400i,500,500i,700,800,900"
	 rel="stylesheet">
</head>
<style>
	#messages ul.error {
          list-style: none;
          color: #a94442;
          background-color:#f2dede;
          border-color:#ebccd1;
          padding: 15px;
          margin-bottom:20px;
          border: 1px solid transparent;
          border-radius: 4px;
        }
        #messages ul.success {
          list-style: none;
          color: #a94442;
          background-color:#f2dede;
          border-color:#ebccd1;
          padding: 15px;
          margin-bottom:20px;
          border: 1px solid transparent;
          border-radius: 4px;
        }

        
        </style>

<body>
	<header class="header">
		<nav class="navbar fixed-top navbar-expand-lg navbar-light  scrolling-navbar">
			<div class="container">
				<a class="navbar-brand waves-effect" href="index.html">
					<strong>ReactChat</strong>
				</a>
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
				 aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
					<!--<span class="navbar-toggler-icon"></span>-->
					<i class="fa fa-navicon fa-lg"></i>
				</button>
				<div class="collapse navbar-collapse" id="navbarSupportedContent">
					<ul class="navbar-nav mr-auto">

					</ul>
					<ul class="navbar-nav nav-flex-icons">
						<li class="nav-item">
							<a href="users/<%- user.username %>" class="btn btn-outline-white waves-effect waves-light"">
								<i class="fa fa-user"></i>
								<span id="userone"><%- user.username %></span>
							</a>
						</li>
						<li></li>
						<li id="usertwo" class="nav-item">
							<a href="users/logout" class="btn btn-outline-white waves-effect waves-light"">
								<i class="fa fa-key"></i> Logout
							</a>
						</li>
					</ul>
				</div>
			</div>
		</nav>
	</header>
	<div class="container">

		<div class="content-app">
			<div class="row" id="messageArea">
				<div class="col-md-4" id="online">
					<div class="well">
						<h3></h3>
						<ul class="list-group" id="users">
						</ul>
					</div>
				</div>
				<div class="col-md-8">
				
				</div>
			</div>
		</div>
		<div class="content-app">
			<div class="row" id="messageArea">
				<div class="col-md-12" id="online">
					<br>
					<div class="mesgs">
						<div class="msg_history">
							<div class="incoming_msg">
								<div class="incoming_msg_img"> <img src="https://ptetutorials.com/images/user-profile.png" alt="sunil"> </div>
								<div class="received_msg">
									<div class="received_withd_msg">
										<p>start sending messages</p>
										<span class="time_date"> 11:01 AM | Dec 11</span>
									</div>
								</div>
							</div>
							
						<% chats.forEach(function(chat){	%>
							<%  if (chat.message.type !== "text") {	%>
							<% if (chat.sender === user.username){  %>
							<div class="outgoing_msg">
								<div class="sent_msg">
										<span class="imgwhite ">
										<%  if (chat.message.type === "image") {	%>
										<img class="bg-white" style="border:3px solid white"	src="http://localhost:5000/<%= chat.message.msg %>"	 width="100%"/>
										<%	}   %>

										<%  if (chat.message.type === "audio") {	%>
											<span class="imgwhite "><audio	class="bg-white" controls>
												<source src="http://localhost:5000/<%= chat.message.msg %>" 
													type="audio/mp3">
												</source>
												<source src="http://localhost:5000/<%= chat.message.msg %>" 
													type="audio/ogg">
												</source>
												<source src="http://localhost:5000/<%= chat.message.msg %>" 
													type="audio/aac">
												</source>
											</audio> </span>
										<%	}   %>
										<%  if (chat.message.type === "video") {	%>
											<span class="imgwhite "><video class="bg-white"	width="100%"	height="100%"	controls>
												<source src="http://localhost:5000/<%= chat.message.msg %>" 
													type="video/mp4">
												</source>
												<source src="http://localhost:5000/<%= chat.message.msg %>" 
													type="video/ogg">
												</source>
												<source src="http://localhost:5000/<%= chat.message.msg %>" 
													type="video/aac">
												</source>
											</video> </span>
										<%	}   %>

										
									<span class="time_date">
										<%= chat.date %></span>
										</span>
										<%  if (chat.message.type === "text") {	%>
											<p><%= chat.message.msg %></p>
										<%	}   %>
								</div>
							</div>

							<%	}   %>
							<%	  if (chat.sender !== user.username){ %>
							<div class="incoming_msg">
								<div class="incoming_msg_img"> <img id="imgavatar" src="img/user.svg" alt="sunil"> </div>
								<div class="received_msg">
									<div class="received_withd_msg">
										
												<%  if (chat.message.type === "image") {	%>
												<span class="imgwhite"><img style="border:3px solid white"	src="http://localhost:5000/<%= chat.message.msg %>" /></span>
												<%	}   %></span>

												<%  if (chat.message.type === "audio") {	%>
													<audio controls>
														<source src="http://localhost:5000/<%= chat.message.msg %>" 
															type="audio/mp3"></source>
															<source src="http://localhost:5000/<%= chat.message.msg %>" 
																type="audio/ogg">
															</source>
															<source src="http://localhost:5000/<%= chat.message.msg %>" 
																type="audio/aac">
															</source>
													</audio> 
												<%	}   %>

												<%  if (chat.message.type === "video") {	%>
													<span class="imgwhite"><video width="100%" style="border:3px solid white"	height="100%"	controls>
														<source src="http://localhost:5000/<%= chat.message.msg %>" 
															type="video/mp4">
														</source>
														<source src="http://localhost:5000/<%= chat.message.msg %>" 
															type="video/ogg">
														</source>
														<source src="http://localhost:5000/<%= chat.message.msg %>" 
															type="video/aac">
														</source>
													</video></span>
												<%	}   %>
										<span class="time_date">
											<a href="/users/<%=	chat.sender	%>"><%=	chat.sender.toUpperCase()	%></a> |
											<%=	chat.date	%></span>
									</div>
								</div>
							</div>
								<%	}   %>
							<%	}   %>
							<%  if (chat.message.type === "text") {	%>
								<%	  if (chat.sender !== user.username){ %>
									<div class="incoming_msg">
											<div class="incoming_msg_img"> <img id="imgavatar" src="img/user.svg" alt="img"> </div>
											<div class="received_msg">
												<div class="received_withd_msg">
													<p><%= chat.message.msg %></p>
													<span class="time_date"><a href="/users/<%=	chat.sender	%>"><%=	chat.sender.toUpperCase()	%></a> |
														<%=	chat.date	%></span>
												</div>
											</div>
										</div>

								<% }  %>
								<%	  if (chat.sender === user.username){ %>

									<div class="outgoing_msg">
											<div class="sent_msg">
														<p><%= chat.message.msg %></p>
														<span class="time_date">
																<a href="/users/<%=	chat.sender	%>"><%=	chat.sender.toUpperCase()	%></a> |
																<%=	chat.date	%></span>
											</div>
									</div>
								<% }  %>
							<%	}   %>
						<%	})   %>
							<div	id="last"></div>
						</div>
						<div class="type_msg">
							<div class="input_msg_write">
								<input id="message" type="text" class="write_msg" placeholder="Type a message" />
								<button id="btn" class="msg_send_btn" type="button"><i class="fa fa-send" aria-hidden="true"></i></button>
							</div>
							<br><a  class="btn btn-outline-primary btn-sm" href="" id="addlink">add link</a>
							<div id="link-form">
								<input id="linktext" placeholder="text to display" /><input id="link" placeholder="link" />
								<input type="button" id="linkbtn" value="add link" />
							</div>
							<a href="" class="btn btn-outline-primary btn-sm"	id="imgLink">send photo</a>
							<form action="/image/<%= receiver  %>" enctype="multipart/form-data" method="POST" id="img-form">
								<input type="file"	required name="image" placeholder="upload" />supports Jpg/png format
								<input type="submit"  value="send" />
							</form>
							<a	class="btn btn-outline-primary btn-sm" href="" id="mpLink">send audio/video</a>
							<form action="/mpsome/<%= receiver  %>" enctype="multipart/form-data" method="POST" id="mp-form">
								<input type="file" name="mpsome"	required placeholder="upload only mp3/mp4/" />
								supports mp3/mp4 formats
								<select name="mpsome">
									<option value="audio">Audio</option>
									<option value="video">Video</option>
								</select>
								<input type="submit"  value="upload" />
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>



		<footer>
			&copy	ReactChat
		</footer>

	</div>


	<script src="vendor/jquery/jquery.min.js"></script>
	<script src="js/socket.io.js"></script>
	<script src="vendor/popper.js/umd/popper.min.js"> </script>
	<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
	<script src="vendor/jquery.cookie/jquery.cookie.js"> </script>
	<script src="vendor/@fancyapps/fancybox/jquery.fancybox.min.js"></script>
	<script src="js/front.js"></script>
	<script src="js/code.js"></script>

	<!-- MDB core JavaScript -->
	<script type="text/javascript" src="md/js/mdb.min.js"></script>
	<!-- Initializations -->
	<script type="text/javascript">
		// Animations initialization
		new WOW().init();
	</script>

</body>



</html>